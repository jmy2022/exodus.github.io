"use strict";(self.webpackChunkexodus_react=self.webpackChunkexodus_react||[]).push([[529],{16110:function(G,v,e){e.r(v),e.d(v,{default:function(){return W}});var f=e(15009),h=e.n(f),t=e(99289),m=e.n(t),l=e(5574),u=e.n(l),x=e(2618),K=e(90930),E=e(35312),H=e(65416),M=e(71577),J=e(85265),Q=e(66476),V=e(88484),i=e(67294),Y=e(22004),$=e(68185),n=e(85893),L=function(){var X=(0,E.useParams)(),o=X.resId,w=(0,E.useModel)("@@initialState"),b=w.initialState,k=b||{},g=k.currentUser,q=(0,i.useState)(!1),C=u()(q,2),U=C[0],B=C[1],_=(0,i.useState)(),R=u()(_,2),S=R[0],T=R[1],ee=function(){B(!0)},ne=function(){B(!1),j&&j.unsubscribe(),T("")},j,te=function(){var c=m()(h()().mark(function s(r){var Z,I,d,z,N,O;return h()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:Z=r.onSuccess,I=r.onError,d=r.file,z=r.onProgress,N=(0,H.ws)(d,void 0,g==null?void 0:g.qiniu,{fname:d.name,mimeType:d.type,customVars:{"x:movieRes":o},metadata:{"x-qn-meta-movieRes":o}},{checkByServer:!0,checkByMD5:!0}),O=performance.now(),j=N.subscribe(function(a){z({percent:a.total.percent})},function(a){I(a),console.log(a)},function(a){(0,x.kQ)(o,a.key,d.size).then(function(ve){Z(a),A(o);var le=performance.now(),ie=le-O;T("".concat(ie," \u6BEB\u79D2"))})});case 4:case"end":return D.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),re=(0,i.useState)(),y=u()(re,2),p=y[0],ue=y[1],A=function(s){return(0,x.KJ)(s).then(function(r){ue(r),r.cloudUrl&&se(r.cloudUrl)})},ae=(0,i.useState)(),P=u()(ae,2),F=P[0],oe=P[1],se=function(s){return(0,x.H8)(s).then(function(r){return oe(r)})};return(0,i.useEffect)(function(){setTimeout(function(){return A(o)},10)},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K._z,{extra:[(0,n.jsx)(M.ZP,{type:"primary",onClick:ee,children:"\u4E0A\u4F20\u8D44\u6E90"},"1")],children:p&&(0,n.jsxs)("div",{className:"content-main",children:[F&&F.length>1&&(0,n.jsx)(Y.Z,{controls:!0,url:F}),(0,n.jsxs)("div",{className:"info",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"name: "})," ",p.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"size: "})," ",(0,$.b)(p.cloudSize)]}),(0,n.jsx)("p",{children:"\u8FD8\u9700\u8981\uFF0C\u663E\u793A\u7535\u5F71\u3001\u8D44\u6E90\u7EC4\u3001\u4FE1\u606F\u540C\u65F6 todo"})]})]})}),(0,n.jsxs)(J.Z,{title:"\u4E0A\u4F20\u8D44\u6E90\u5230\u5907\u4EFD\u670D\u52A1\u5668",placement:"right",onClose:ne,open:U,children:[(0,n.jsx)("p",{children:"\u91CD\u590D\u4E0A\u4F20\u4F1A\u8986\u76D6"}),S&&S.length>1&&(0,n.jsxs)("h4",{children:["\u8017\u65F6:",S]}),U&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Q.Z,{maxCount:1,customRequest:te,children:(0,n.jsx)(M.ZP,{icon:(0,n.jsx)(V.Z,{}),children:"Upload"})})})]})]})},W=L},68185:function(G,v,e){e.d(v,{b:function(){return f}});var f=function(t){if(isNaN(t))return"";var m=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(t)/Math.log(2));l<1&&(l=0);var u=Math.floor(l/10);return t=t/Math.pow(2,10*u),t.toString().length>t.toFixed(2).toString().length&&(t=t.toFixed(2)),t+" "+m[u]}}}]);
